

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Examples &mdash; hypoct 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="hypoct 0.1 documentation" href="index.html" />
    <link rel="next" title="Python API" href="api.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="Python API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">hypoct 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>We give some further examples on using hypoct in this section. Some of these can also be considered tests. Insert into the preamble of each code snippet the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">hypoct</span><span class="o">,</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</pre></div>
</div>
<div class="section" id="degenerate-distributions">
<h2>Degenerate distributions<a class="headerlink" href="#degenerate-distributions" title="Permalink to this headline">¶</a></h2>
<p>A good test of robustness is to run hypoct on data that is degenerate in one or more dimensions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">hypoct</span><span class="o">.</span><span class="n">Tree</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>The following output shows that the test succeeds:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">lvlx</span>

<span class="go">array([[  0,   1,   3,   7,  15,  31,  61, 105, 159, 193, 215, 231, 239,</span>
<span class="go">      245, 249],</span>
<span class="go">       [ 13,   0,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2,   2,</span>
<span class="go">        2,   2]], dtype=int32)</span>
</pre></div>
</div>
<p>Note the string of twos in <tt class="docutils literal"><span class="pre">tree.lvlx[1,:]</span></tt>, which indicates that subdivision occurred only along the second dimension and not the first (which has zero extent).</p>
</div>
<div class="section" id="high-dimensional-data">
<h2>High-dimensional data<a class="headerlink" href="#high-dimensional-data" title="Permalink to this headline">¶</a></h2>
<p>Another good test is on high-dimensional data. Here, we try <span class="math">\(d = 30\)</span>, for which <span class="math">\(2^{d} \sim 10^{9}\)</span>, near the upper limit of four-byte integer values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">hypoct</span><span class="o">.</span><span class="n">Tree</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">find_neighbors</span><span class="p">()</span>
</pre></div>
</div>
<p>The code executes successfully with outputs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">lvlx</span>

<span class="go">array([[         0,          1,        101],</span>
<span class="go">       [         1,          0, 1073741823]], dtype=int32)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">nborp</span>

<span class="go">array([   0,    0,   99,  198,  297,  396,  495,  594,  693,  792,  891,</span>
<span class="go">        990, 1089, 1188, 1287, 1386, 1485, 1584, 1683, 1782, 1881, 1980,</span>
<span class="go">       2079, 2178, 2277, 2376, 2475, 2574, 2673, 2772, 2871, 2970, 3069,</span>
<span class="go">       3168, 3267, 3366, 3465, 3564, 3663, 3762, 3861, 3960, 4059, 4158,</span>
<span class="go">       4257, 4356, 4455, 4554, 4653, 4752, 4851, 4950, 5049, 5148, 5247,</span>
<span class="go">       5346, 5445, 5544, 5643, 5742, 5841, 5940, 6039, 6138, 6237, 6336,</span>
<span class="go">       6435, 6534, 6633, 6732, 6831, 6930, 7029, 7128, 7227, 7326, 7425,</span>
<span class="go">       7524, 7623, 7722, 7821, 7920, 8019, 8118, 8217, 8316, 8415, 8514,</span>
<span class="go">       8613, 8712, 8811, 8910, 9009, 9108, 9207, 9306, 9405, 9504, 9603,</span>
<span class="go">       9702, 9801, 9900], dtype=int32)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">nbori</span>

<span class="go">array([  3,   4,   5, ...,  98,  99, 100], dtype=int32)</span>
</pre></div>
</div>
<p>For higher dimensions, hypoct must be modified and recompiled to use extended precision integers, e.g., <tt class="docutils literal"><span class="pre">integer*8</span></tt> in Fortran, <tt class="docutils literal"><span class="pre">long</span> <span class="pre">long</span></tt> in C, and <tt class="docutils literal"><span class="pre">int64</span></tt> in Python (NumPy).</p>
</div>
<div class="section" id="periodic-data">
<h2>Periodic data<a class="headerlink" href="#periodic-data" title="Permalink to this headline">¶</a></h2>
<p>To construct a triply periodic tree with unit cell extents of, say, 10, 2, and 2, respectively, in the first, second, and third dimensions, write, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">hypoct</span><span class="o">.</span><span class="n">Tree</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">tree</span><span class="o">.</span><span class="n">find_neighbors</span><span class="p">(</span><span class="n">per</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">get_interaction_lists</span><span class="p">()</span>
</pre></div>
</div>
<p>The periodicity of the interaction lists inherits from that of the neighbor list.</p>
</div>
<div class="section" id="tree-on-triangles">
<h2>Tree on triangles<a class="headerlink" href="#tree-on-triangles" title="Permalink to this headline">¶</a></h2>
<p>The following code demonstrates how to build a tree on triangles:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># format for `vert`: vertex `i` of triangle `j` has coordinates `vert[:,i,j]`</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">vert</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c"># compute triangle centroids</span>
<span class="n">cent</span> <span class="o">=</span> <span class="n">vert</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># compute triangle diameters</span>
<span class="n">diam</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
  <span class="n">diam</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vert</span><span class="p">[:,:,</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">vert</span><span class="p">[:,:,</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="c"># build tree</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">hypoct</span><span class="o">.</span><span class="n">Tree</span><span class="p">(</span><span class="n">cent</span><span class="p">,</span> <span class="n">elem</span><span class="o">=</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="n">siz</span><span class="o">=</span><span class="n">diam</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-plot-styles-for-treeviewer">
<h2>Changing plot styles for TreeViewer<a class="headerlink" href="#changing-plot-styles-for-treeviewer" title="Permalink to this headline">¶</a></h2>
<p>Plot styles for <a class="reference internal" href="api.html#hypoct.tools.TreeViewer.draw_interactive" title="hypoct.tools.TreeViewer.draw_interactive"><tt class="xref py py-meth docutils literal"><span class="pre">hypoct.tools.TreeViewer.draw_interactive()</span></tt></a> can be changed by specifying <tt class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></tt>-type keywords. For example, using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">hypoct.tools</span> <span class="kn">import</span> <span class="n">TreeViewer</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">TreeViewer</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">view</span><span class="o">.</span><span class="n">draw_interactive</span><span class="p">(</span><span class="n">node_alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">point_c</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">nbor_color</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">ilst_color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>sets the transparency level for the current node patch to 0.2, the color for points contained within the current node to green, the color of neighboring node patches to yellow, and the color of node patches in the interaction list to red.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Examples</a><ul>
<li><a class="reference internal" href="#degenerate-distributions">Degenerate distributions</a></li>
<li><a class="reference internal" href="#high-dimensional-data">High-dimensional data</a></li>
<li><a class="reference internal" href="#periodic-data">Periodic data</a></li>
<li><a class="reference internal" href="#tree-on-triangles">Tree on triangles</a></li>
<li><a class="reference internal" href="#changing-plot-styles-for-treeviewer">Changing plot styles for TreeViewer</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">Python API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/example.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="Python API"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >previous</a> |</li>
        <li><a href="index.html">hypoct 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2014, Kenneth L. Ho.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>